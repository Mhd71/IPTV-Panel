summary: CHECK AND CREATE SHORTLINK FOR USER
description: VALIDATES ADMIN PASSWORD AND CHECKS FOR EXISTENCE OF SHORTLINK FOR THE USER. CREATES A NEW SHORTLINK IF NONE EXISTS. RETURNS USER DETAILS AND THE NEW SHORTLINK.
tags:
 - AUTHORIZED
requestBody:
  content:
    application/json:
      schema:
        type: object
        properties:
          uuid:
            type: string
            description: UNIQUE IDENTIFIER FOR THE USER.
          admin_password:
            type: string
            description: ADMIN PASSWORD REQUIRED FOR AUTHORIZATION.
        required:
          - uuid
          - admin_password
responses:
  '201':
    description: SUCCESSFULLY CREATED A NEW SHORTLINK FOR THE USER.
    content:
      application/json:
        schema:
          type: object
          properties:
            username:
              type: string
              description: USERNAME OF THE USER.
            expiration_date:
              type: string
              format: date
              description: EXPIRATION DATE OF THE USER ACCOUNT.
            uuid:
              type: string
              description: UNIQUE IDENTIFIER FOR THE USER.
            reseller_username:
              type: string
              description: USERNAME OF THE RESELLER.
            shortlink:
              type: string
              description: THE GENERATED SHORTLINK.
            message:
              type: string
              example: 'New shortlink has been created successfully.'
  '400':
    description: MISSING REQUIRED FIELDS OR INVALID JSON FORMAT.
    content:
      application/json:
        schema:
          type: object
          properties:
            message:
              type: string
              example: 'Missing required fields: uuid and admin_password are both required.'
  '401':
    description: INCORRECT ADMIN PASSWORD.
    content:
      application/json:
        schema:
          type: object
          properties:
            message:
              type: string
              example: 'Incorrect admin password.'
  '403':
    description: USER ACCOUNT HAS EXPIRED.
    content:
      application/json:
        schema:
          type: object
          properties:
            message:
              type: string
              example: 'User account has expired.'
  '404':
    description: USER NOT FOUND.
    content:
      application/json:
        schema:
          type: object
          properties:
            message:
              type: string
              example: 'User not found.'
  '409':
    description: SHORTLINK ALREADY EXISTS FOR THE USER.
    content:
      application/json:
        schema:
          type: object
          properties:
            message:
              type: string
              example: 'A shortlink already exists for this user.'